---
import BaseLayout from '@layouts/BaseLayout.astro';

const projectTypes = ['Web Development', 'Artificial Intelligence', 'Business Intelligence', 'Consulting', 'Other'];

// Contact Page Schema Markup
const contactSchema = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  "name": "Contact WebnDigital",
  "description": "Get in touch with WebnDigital for your next AI or web development project",
  "url": "https://webndigital.com/contact",
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://webndigital.com"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Contact",
        "item": "https://webndigital.com/contact"
      }
    ]
  },
  "mainEntity": {
    "@type": "Organization",
    "name": "WebnDigital",
    "url": "https://webndigital.com",
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+44-7902-844675",
      "contactType": "customer service",
      "email": "hello@webndigital.com",
      "areaServed": "Worldwide",
      "availableLanguage": ["English"],
      "contactOption": "TollFree"
    },
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "",
      "addressLocality": "London",
      "addressCountry": "UK",
      "postalCode": "SW1A 1AA"
    }
  }
};
---

<BaseLayout
  title="Contact Us - Get in Touch with WebnDigital | Free Consultation"
  description="Ready to start your next AI, web development, or digital marketing project? Contact WebnDigital for a free consultation. We're here to help transform your business with innovative technology solutions."
  keywords="contact webndigital, get in touch, free consultation, AI consultation, web development inquiry, project inquiry, London tech company contact, digital transformation consultation"
  image="/og-contact.png"
  schema={contactSchema}
>
  <!-- Contact Hero -->
  <section class="contact-hero section-sm">
    <div class="container">
      <div class="contact-intro">
        <h1 class="contact-title">
          <span class="contact-title-main">Let's talk about it,</span>
          <span class="contact-title-accent italic-serif">together.</span>
        </h1>
        <p class="contact-subtitle">
          For you, an hour<br>
          of free consultation.
        </p>
      </div>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section class="contact-section section">
    <div class="container">
      <div class="contact-grid">
        <!-- Contact Info -->
        <div class="contact-info">
          <div class="info-card">
            <h3 class="info-title">Get in Touch</h3>
            <p class="info-text">
              We're here to help you succeed. Whether you have a project in mind or just want to learn more about our services, we'd love to hear from you.
            </p>
            
            <div class="contact-details">
              <div class="detail-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
                <div>
                  <strong>Office</strong>
                  <p>123 Innovation Street<br>London, UK SW1A 1AA</p>
                </div>
              </div>
              
              <div class="detail-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2"/>
                  <path d="M22 6l-10 7L2 6" stroke="currentColor" stroke-width="2"/>
                </svg>
                <div>
                  <strong>Email</strong>
                  <p><a href="mailto:hello@webndigital.com">hello@webndigital.com</a></p>
                </div>
              </div>
              
              <div class="detail-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <div>
                  <strong>Phone</strong>
                  <p><a href="tel:+447902844675">+44 7902 844675</a></p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="info-card testimonial-card">
            <h4>What Our Clients Say</h4>
            <div class="testimonial-rating">
              <span class="rating-score">4.8</span>
              <div class="rating-stars">★★★★★</div>
            </div>
            <p class="testimonial-text">
              "WebnDigital transformed our business with their innovative AI solutions. Their team is professional, responsive, and truly understands our needs."
            </p>
            <p class="testimonial-author">— Sarah M., CEO</p>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="contact-form-wrapper">
          <form class="contact-form" method="POST" action="/api/contact" id="contact-form">
            <div class="form-group">
              <label for="name">Your Full Name</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required 
                placeholder="John Doe"
              />
            </div>
            
            <div class="form-group">
              <label for="email">Your Professional Email Address</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required 
                placeholder="john@company.com"
              />
            </div>
            
            <div class="form-group">
              <label for="phone">Your Phone Number</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                pattern="[0-9+\-\s()]*"
                placeholder="+44 7902 844675"
                title="Please enter a valid phone number (numbers, +, -, spaces and parentheses only)"
              />
            </div>
            
            <div class="form-group">
              <label for="company">Your Company</label>
              <input 
                type="text" 
                id="company" 
                name="company" 
                placeholder="Company Name Ltd"
              />
            </div>
            
            <div class="form-group">
              <label for="project-type">Project Type</label>
              <select id="project-type" name="projectType">
                <option value="">Select a service</option>
                {projectTypes.map((type) => (
                  <option value={type}>{type}</option>
                ))}
              </select>
            </div>
            
            <div class="form-group">
              <label for="message">What would you like to talk about?</label>
              <textarea 
                id="message" 
                name="message" 
                rows="6" 
                required
                placeholder="Tell us about your project..."
              ></textarea>
            </div>
            
            <div class="form-group checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" name="privacy" required />
                <span>
                  I have read and understood WebnDigital's Privacy Policy and I consent to the processing of my personal data for the purposes stated.
                </span>
              </label>
            </div>
            
            <button type="submit" class="btn btn-primary btn-submit">
              Send Message
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M18 2L9 11M18 2L12 18L9 11M18 2L2 8L9 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            
            <div class="form-message" id="form-message"></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Customer Logos -->
  <section class="customers-section">
    <div class="container">
      <span class="customers-label">Our Customers</span>
      <div class="customers-slider-wrapper">
        <div class="customers-slider">
          <div class="customers-slide">
            {[1, 2, 3, 4].map((num) => (
              <img src={`/images/customers/${num}.png`} alt={`Customer ${num}`} loading="lazy" />
            ))}
          </div>
          <div class="customers-slide">
            {[5, 6, 7, 8].map((num) => (
              <img src={`/images/customers/${num}.png`} alt={`Customer ${num}`} loading="lazy" />
            ))}
          </div>
          <div class="customers-slide">
            {[9, 10, 11, 12].map((num) => (
              <img src={`/images/customers/${num}.png`} alt={`Customer ${num}`} loading="lazy" />
            ))}
          </div>
          <div class="customers-slide">
            {[13, 1, 2, 3].map((num) => (
              <img src={`/images/customers/${num}.png`} alt={`Customer ${num}`} loading="lazy" />
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .contact-hero {
    background: var(--color-bg-light);
    padding: 4rem 0 2rem;
  }
  
  .contact-intro {
    max-width: 600px;
  }
  
  .contact-title {
    margin-bottom: 2rem;
  }
  
  .contact-title-main {
    display: block;
    font-size: clamp(2rem, 4vw, 2.25rem);
    font-weight: 400;
    line-height: 1.5;
    margin-bottom: 0.5rem;
  }
  
  .contact-title-accent {
    display: block;
    font-size: clamp(1.75rem, 3.5vw, 2rem);
    line-height: 1.2;
  }
  
  .contact-subtitle {
    font-size: clamp(1.5rem, 3vw, 2.25rem);
    line-height: 1.2;
    color: var(--color-black);
  }
  
  .contact-grid {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: 4rem;
    align-items: start;
  }
  
  .info-card {
    background: var(--color-white);
    padding: 2rem;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    margin-bottom: 2rem;
  }
  
  .info-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .info-text {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--color-text-gray);
    margin-bottom: 2rem;
  }
  
  .contact-details {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .detail-item {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
  }
  
  .detail-item svg {
    flex-shrink: 0;
    color: var(--color-primary);
    margin-top: 0.25rem;
  }
  
  .detail-item strong {
    display: block;
    font-weight: 600;
    margin-bottom: 0.25rem;
  }
  
  .detail-item p {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-gray);
  }
  
  .detail-item a {
    color: var(--color-primary);
  }
  
  .testimonial-card {
    background: var(--gradient-primary);
    color: var(--color-white);
  }
  
  .testimonial-card h4 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .testimonial-rating {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }
  
  .rating-score {
    font-size: 1.5rem;
    font-weight: 700;
  }
  
  .rating-stars {
    color: #FCBF02;
    font-size: 1.25rem;
  }
  
  .testimonial-text {
    font-size: 0.875rem;
    line-height: 1.6;
    margin-bottom: 1rem;
    opacity: 0.95;
  }
  
  .testimonial-author {
    font-size: 0.875rem;
    font-weight: 600;
    opacity: 0.9;
  }
  
  .contact-form-wrapper {
    background: var(--color-white);
    padding: 3rem;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
  }
  
  .contact-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  
  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .form-group label {
    font-size: 1rem;
    font-weight: 700;
    color: var(--color-text-dark);
  }
  
  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 1rem;
    border: 1px solid #767676;
    border-radius: var(--radius-sm);
    background-color: var(--color-bg-input);
    font-family: var(--font-sans);
    font-size: 1rem;
    transition: all var(--transition-base);
  }
  
  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary);
    background-color: var(--color-white);
  }
  
  .form-group select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%23767676' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 3rem;
  }
  
  .form-group select:focus {
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%230091FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  }
  
  .form-group textarea {
    resize: vertical;
    min-height: 125px;
  }
  
  .checkbox-group {
    margin-top: 0.5rem;
  }
  
  .checkbox-label {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    cursor: pointer;
    font-weight: 400;
  }
  
  .checkbox-label input[type="checkbox"] {
    margin-top: 0.25rem;
    width: 18px;
    height: 18px;
    cursor: pointer;
  }
  
  .checkbox-label span {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-muted);
  }
  
  .btn-submit {
    margin-top: 1rem;
    width: 100%;
    justify-content: center;
  }
  
  .form-message {
    padding: 1rem;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    text-align: center;
    display: none;
  }
  
  .form-message.success {
    display: block;
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }
  
  .form-message.error {
    display: block;
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }
  
  .customers-section {
    padding: 3rem 0;
    background: var(--color-bg-gray);
  }
  
  .customers-label {
    display: block;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-gray);
    margin-bottom: 2rem;
  }
  
  .customers-slider-wrapper {
    overflow: hidden;
    position: relative;
  }
  
  .customers-slider {
    display: flex;
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .customers-slide {
    min-width: 100%;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    align-items: center;
    justify-items: center;
  }
  
  .customers-slide img {
    height: 100px;
    width: auto;
    max-width: 200px;
    object-fit: contain;
    opacity: 0.7;
    transition: all var(--transition-base);
    filter: grayscale(100%);
  }
  
  .customers-slide img:hover {
    opacity: 1;
    filter: grayscale(0%);
    transform: scale(1.1);
  }
  
  @media (max-width: 1024px) {
    .contact-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
  }
  
  @media (max-width: 768px) {
    .contact-form-wrapper {
      padding: 2rem;
    }
    
    .form-group select {
      padding: 1.25rem 3rem 1.25rem 1rem;
      font-size: 1rem;
      min-height: 52px;
    }

    .customers-slide {
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
    
    .customers-slide img {
      height: 70px;
      max-width: 150px;
    }
  }

  @media (max-width: 480px) {
    .customers-slide {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
    
    .customers-slide img {
      height: 50px;
      max-width: 100px;
    }
  }
</style>

<script>
  // Contact form handling
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const formMessage = document.getElementById('form-message');
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    
    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      });
      
      if (response.ok) {
        formMessage?.classList.add('success');
        formMessage?.classList.remove('error');
        if (formMessage) formMessage.textContent = 'Thank you for your message! We\'ll get back to you soon.';
        form.reset();
      } else {
        throw new Error('Failed to send message');
      }
    } catch (error) {
      formMessage?.classList.add('error');
      formMessage?.classList.remove('success');
      if (formMessage) formMessage.textContent = 'Sorry, there was an error sending your message. Please try again or email us directly.';
    }
  });

  // Customer logos auto slider
  function initCustomersSlider() {
    const slider = document.querySelector('.customers-slider') as HTMLElement;
    if (!slider) return;

    let currentSlide = 0;
    const totalSlides = slider.children.length;

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      const offset = currentSlide * -100;
      slider.style.transform = `translateX(${offset}%)`;
    }

    // Auto slide every 5 seconds
    setInterval(nextSlide, 5000);
  }

  // Initialize customers slider
  initCustomersSlider();
</script>
